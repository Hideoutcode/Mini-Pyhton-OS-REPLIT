--added working function openfile variable scope and bug fixes--
